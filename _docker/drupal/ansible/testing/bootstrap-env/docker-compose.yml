---
version: '3'
services:
  seed_env:
    build:
      context: ../rhdp-data-seed
    environment:
      - DEPLOYMENT_ID=1
    volumes:
      - drupal_workspace:/drupal-workspace
      - drupal_backups:/drupal-backups

  bootstrap_env:
    image: registry.paas.redhat.com/rhdp/rhdp-base
    command: ["/bin/bash"]
    working_dir: "/ansible"
    environment:
      - DEPLOYMENT_ID=1
    volumes:
      - ../../:/ansible
      - ../env.yml:/credentials/ansible/env.yml
      - drupal_workspace:/drupal-workspace
      - drupal_backups:/drupal-backups
    depends_on:
      - mysql

  mysql:
    image: mariadb:10.3.9-bionic
    environment:
      - MYSQL_ROOT_PASSWORD=password
    ports:
      - "3306:3306"
    expose:
      - 3306

volumes:
  drupal_workspace:
   driver: local
  drupal_backups:
    driver: local
